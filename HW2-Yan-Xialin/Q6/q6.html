<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>ALL THE THINGS</title>
    <script type="text/javascript" src="../lib/d3/d3.v3.js"></script>
</head>

<body>

    <div id="chart2005"></div>
    <div id="chart2006"></div>
    <div id="chart2007"></div>
    <div id="chart2008"></div>
    <div id="chart2009"></div>
    <div id="chart2010"></div>
    <div id="chart2011"></div>
    <div id="chart2012"></div>
    <div id="chart2013"></div>


    <script type="text/javascript">
        var dataset;
        var data;
        var chart1Data = {};
        var listCountries;
        var ALLTHEDATA ={};
        var years = [2005,2006,2007,2008,2009,2010,2011,2012,2013];
        var strYears = ['2005','2006','2007','2008','2009','2010','2011','2012','2013'];
        var max;
        var margin = {
                top: 30,
                right: 20,
                bottom: 40,
                left: 60
            },

            width = 1000 - margin.left - margin.right,
            height = 700 - margin.top - margin.bottom;


        d3.json("asdfghjkl.json", function(error, json) {
            if (error) return console.warn(error);
            dataset = json;


            json.forEach(function(d) {
                var tempValue = +(d['Refugees (incl. refugee-like situations)']);

                if (typeof(tempValue) === 'number' && tempValue != NaN) {
                    if (chart1Data[d['Origin']] == undefined) {
                        var tempDict = {};
                        tempDict[d['Year']] = tempValue;
                        chart1Data[d['Origin']] = tempDict
                    } else {
                        if (chart1Data[d['Origin']][d['Year']] == undefined) {
                            chart1Data[d['Origin']][d['Year']] = tempValue;
                        } else {
                            chart1Data[d['Origin']][d['Year']] = chart1Data[d['Origin']][d['Year']] + tempValue;
                        }
                    }

                }


            });


            listCountries = Object.keys(chart1Data);

            for(var merp in years){
                var graphData = {};
                for (var tempKey in listCountries) {
                    graphData[tempKey] = chart1Data[listCountries[tempKey]][strYears[merp]];
                }
                ALLTHEDATA[merp] = graphData;
            }

            max = d3.max(ALLTHEDATA, function(d) {
                return d;
            });


            var svg = d3.select('#chart2005').append("svg")
                .attr("width", width/3)
                .attr("height", height/3);

            // console.log("TEST")
            svg.selectAll(".dot")
                .data(ALLTHEDATA[0])
                .enter()
                .append("circle")
                .attr("class", "dot")
                .attr("r", function(d){return d;})
                .attr("transform", function(d) {
                    return "translate(" + d*10 + "," + d*10 + ")";
                })


        });




    </script>
</body>

</html>