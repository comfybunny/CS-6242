<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>BARS</title>
    <script type="text/javascript" src="../lib/d3/d3.v3.js"></script>
</head>

<body onload="loadMap()">
    <div id="chart1"></div>
    <div id="chart2"></div>

    <select id="year">
        <option value="2005">2005</option>
        <option value="2006">2006</option>
        <option value="2007">2007</option>
        <option value="2008">2008</option>
        <option value="2009">2009</option>
        <option value="2010">2010</option>
        <option value="2011">2011</option>
        <option value="2012">2012</option>
        <option value="2013">2013</option>
        <option value="2014">2014</option>
    </select>


    <script type="text/javascript">
        var dataset;
        var data;
        var margin = {
                top: 30,
                right: 20,
                bottom: 40,
                left: 60
            },

            width = 1000 - margin.left - margin.right,
            height = 700 - margin.top - margin.bottom;

        var dispatch = d3.dispatch("load", "statechange");

        function loadMap() {
            loadChart1();
            // loadChart2();
        }

        function loadChart1() {
            var svg = d3.select("#chart1")
                .append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform", "translate(" + margin.left + "," + margin.top + ")");


            d3.json("poc.json", function(error, json) {
                if (error) return console.warn(error);
                dataset = json;
                data = d3.nest()
                    .key(function(d) {
                        return d.Origin;
                    })
                    .rollup(function(d) {
                        return d3.sum(d, function(g) {
                            return +(g.Refugees);
                        });
                    }).entries(dataset);

            });
        }
    </script>
</body>

</html>